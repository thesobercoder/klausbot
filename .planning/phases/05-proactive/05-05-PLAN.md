---
phase: 05-proactive
plan: 05
type: execute
wave: 4
depends_on: ["05-03", "05-04"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "User can create cron via natural language"
    - "Cron executes at scheduled time"
    - "User receives Telegram notification on cron completion"
    - "/crons shows scheduled tasks"
    - "LEARNINGS.md exists after bootstrap"
    - "Bot avoids mistakes documented in LEARNINGS.md"
  artifacts: []
  key_links: []
---

<objective>
Verify complete Phase 5 functionality: cron scheduling, execution, and learning system.

Purpose: Ensure all requirements work end-to-end before marking phase complete.
Output: Verified working proactive system.
</objective>

<execution_context>
@/home/soham/.claude/get-shit-done/workflows/execute-plan.md
@/home/soham/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-proactive/05-RESEARCH.md
@.planning/phases/05-proactive/05-01-SUMMARY.md
@.planning/phases/05-proactive/05-02-SUMMARY.md
@.planning/phases/05-proactive/05-03-SUMMARY.md
@.planning/phases/05-proactive/05-04-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Verify build and startup</name>
  <files></files>
  <action>
1. Clean build: rm -rf dist && npm run build
2. Verify no TypeScript errors
3. Check cron module exports: node -e "import('./dist/cron/index.js').then(m => console.log(Object.keys(m)))"
4. Verify parseSchedule works: node -e "import('./dist/cron/index.js').then(m => console.log(m.parseSchedule('every 5 minutes')))"
5. Start gateway briefly to verify cron scheduler initializes: npm run start (check logs for "Cron scheduler initialized")
  </action>
  <verify>
npm run build exits 0
Gateway logs show "Cron scheduler initialized"
  </verify>
  <done>
Build succeeds, cron module loads, scheduler initializes.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete cron system with:
- Natural language schedule parsing
- JSON persistence
- Background scheduler
- Telegram notifications
- /crons command

Learning system with:

- LEARNINGS.md created during bootstrap
- System prompt instructions for learning consultation
- Proactive suggestion instructions
  </what-built>
  <how-to-verify>

## Cron System Tests

1. **Create cron via conversation:**
   - Send: "Remind me in 2 minutes to test the cron"
   - Verify: Bot confirms creation with next run time

2. **List crons:**
   - Send: /crons
   - Verify: Shows the created task with next run time

3. **Wait for execution:**
   - Wait 2 minutes
   - Verify: Receive notification "[Cron: ...] {result}"

4. **Check persistence:**
   - Restart the bot: npm run start
   - Send: /crons
   - Verify: Task still listed (survived restart)

5. **Delete cron:**
   - Send: "Delete the reminder about testing"
   - Verify: Bot confirms deletion
   - Send: /crons
   - Verify: Task no longer listed

## Learning System Tests

6. **Check LEARNINGS.md exists:**
   - (After fresh bootstrap) Check ~/.klausbot/identity/LEARNINGS.md exists
   - OR if already bootstrapped, manually create the file

7. **Test learning capture:**
   - Send: "Remember this for the future: always use UTC for timestamps"
   - Verify: Bot acknowledges
   - Check ~/.klausbot/identity/LEARNINGS.md for new entry

8. **Test proactive suggestions:**
   - Have a conversation where you ask about similar things repeatedly
   - Verify: Bot may suggest automation at end of conversation

## Requirements Coverage

| Requirement | Test                         | Result    |
| ----------- | ---------------------------- | --------- |
| CRON-01     | Task 4 - restart persistence | Pass/Fail |
| CRON-02     | Task 3 - execution           | Pass/Fail |
| CRON-03     | Task 1 - natural language    | Pass/Fail |
| CRON-04     | Tasks 2, 5 - list/delete     | Pass/Fail |
| CRON-05     | Task 3 - notification        | Pass/Fail |
| EVOL-01     | Task 7 - LEARNINGS.md        | Pass/Fail |
| EVOL-02     | Task 7 - consults learnings  | Pass/Fail |
| EVOL-05     | Task 8 - suggestions         | Pass/Fail |

  </how-to-verify>
  <resume-signal>
Report results as:
- PASSED: All tests pass
- ISSUES: List specific failures

If ISSUES, describe what went wrong for gap closure.
</resume-signal>
</task>

</tasks>

<verification>
All phase success criteria verified:
1. User says "remind me every morning at 9am about X" and cron executes reliably
2. User can list, modify, delete existing crons through natural conversation
3. Cron execution results sent to user via Telegram (success and failure)
4. LEARNINGS.md contains mistakes and insights from past sessions
5. Bot avoids repeating documented mistakes (consults LEARNINGS.md)
6. Bot proactively suggests improvements based on usage patterns
</verification>

<success_criteria>

- All CRON-\* requirements pass human verification
- All EVOL-\* requirements pass human verification
- No critical bugs discovered
- Phase 5 ready for completion
  </success_criteria>

<output>
After completion, create `.planning/phases/05-proactive/05-05-SUMMARY.md`
</output>
