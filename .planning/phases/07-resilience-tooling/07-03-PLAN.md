---
phase: 07-resilience-tooling
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - src/memory/context.ts
autonomous: true

must_haves:
  truths:
    - "System prompt includes agents folder reminder"
    - "Reminder tells Claude where agents live (~/.claude/agents/)"
    - "Reminder explains agent file format (YAML frontmatter + body)"
  artifacts:
    - path: "src/memory/context.ts"
      provides: "Agent folder reminder in system prompt"
      exports: ["getAgentReminder"]
      contains: "~/.claude/agents/"
  key_links:
    - from: "src/memory/context.ts"
      to: "buildSystemPrompt"
      via: "getAgentReminder included in prompt"
      pattern: "getAgentReminder"
---

<objective>
Add agents folder reminder to system prompt, enabling natural language agent authoring.

Purpose: Claude Code natively supports agents via ~/.claude/agents/ markdown files. By reminding Claude about this folder and format, users can describe agents in natural language and Claude creates them.

Output: Updated context.ts with getAgentReminder() integrated into buildSystemPrompt().
</objective>

<execution_context>
@/home/soham/.claude/get-shit-done/workflows/execute-plan.md
@/home/soham/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/07-resilience-tooling/07-RESEARCH.md
@src/memory/context.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add getAgentReminder function</name>
  <files>src/memory/context.ts</files>
  <action>
1. Add new function after getSkillReminder():

```typescript
/**
 * Get agent folder reminder for system prompt
 * Tells Claude where to create and save agents
 *
 * @returns Agent folder reminder wrapped in XML tags
 */
export function getAgentReminder(): string {
  return `<agent-folder>
Agents live in ~/.claude/agents/ - create and save agent files there.

Agent file format (markdown with YAML frontmatter):
---
name: agent-name
description: What this agent does
tools: Read, Glob, Grep, Bash
model: inherit
---

Body is the system prompt for the agent.

When user wants to create an agent, write the file to ~/.claude/agents/{name}.md
</agent-folder>`;
}
```

2. Update buildSystemPrompt() to include agent reminder:

```typescript
export function buildSystemPrompt(): string {
  const skillReminder = getSkillReminder();
  const agentReminder = getAgentReminder(); // ADD THIS
  const identity = loadIdentity();
  const instructions = getRetrievalInstructions();

  // Skill reminder first, agent reminder second, then identity, then instructions
  return (
    skillReminder +
    "\n\n" +
    agentReminder +
    "\n\n" +
    identity +
    "\n\n" +
    instructions
  );
}
```

The agent reminder goes after skill reminder because both are "folder location" reminders - group them together before identity content.
</action>
<verify>`npm run build` compiles</verify>
<done>getAgentReminder() exists and is included in buildSystemPrompt()</done>
</task>

<task type="auto">
  <name>Task 2: Verify system prompt includes agent reminder</name>
  <files>src/memory/context.ts</files>
  <action>
1. Add temporary verification (optional, can be done mentally):
   - The buildSystemPrompt() output should contain `<agent-folder>` tag
   - The output should contain `~/.claude/agents/` path
   - The output should contain the YAML frontmatter example

2. Ensure export is available:
   - getAgentReminder should be exported (add to exports if not automatic)
   - Though it may only be used internally by buildSystemPrompt

3. No changes to memory/index.ts needed - context.ts already exports buildSystemPrompt which is used by spawner.
   </action>
   <verify>Build compiles; grep src/memory/context.ts for "agent-folder"</verify>
   <done>Agent reminder properly integrated into system prompt chain</done>
   </task>

</tasks>

<verification>
- [ ] `npm run build` succeeds
- [ ] context.ts contains getAgentReminder function
- [ ] buildSystemPrompt includes agentReminder in output
- [ ] Agent folder path mentioned: ~/.claude/agents/
- [ ] Agent file format documented: YAML frontmatter + body
</verification>

<success_criteria>

- System prompt tells Claude where agents live
- Format documented (frontmatter: name, description, tools, model)
- User can say "create an agent that..." and Claude knows where to save it
- No changes to other modules needed
  </success_criteria>

<output>
After completion, create `.planning/phases/07-resilience-tooling/07-03-SUMMARY.md`
</output>
