---
phase: 04.1
plan: 02
subsystem: cli
tags: [skills, interactive, inquirer]

dependency-graph:
  requires: [04-02] # GitHub API skill download
  provides: [skill-browse-command, version-detection]
  affects: []

tech-stack:
  added: [] # @inquirer/prompts already installed
  patterns: [search-prompt, content-hash-versioning]

files:
  created: []
  modified:
    - src/cli/skills.ts
    - src/cli/index.ts
    - src/index.ts

decisions:
  - id: 04.1-02-01
    choice: "SHA256 content hash for version detection"
    reason: "Simple, deterministic, no remote manifest needed"
  - id: 04.1-02-02
    choice: "Empty contentHash = always up-to-date"
    reason: "Allows registry entries without version tracking"

metrics:
  duration: 2 min
  completed: 2026-01-30
---

# Phase 4.1 Plan 02: Skills Browse Command Summary

Interactive `klausbot skills browse` command with type-to-filter using @inquirer/search.

## What Was Built

**Task 1: Skill registry and browse function**

- `RegistrySkill` interface with name, description, commands[], contentHash
- `REGISTRY` array (hardcoded per CONTEXT.md - start with skill-creator only)
- `getInstalledHash()` - SHA256 hash of installed SKILL.md (12 char prefix)
- `checkForUpdate()` - compare installed hash vs registry hash
- `formatChoice()` - adds `[installed]` or `[update]` badge
- `browseSkills()` - interactive search with confirmation dialog

**Task 2: CLI wiring**

- Export `browseSkills` from cli/index.ts
- Route `klausbot skills browse` to `browseSkills()`
- Help text updated to show `[browse]` option

## Key Implementation Details

```typescript
// Registry entry structure
interface RegistrySkill {
  name: string;
  description: string;
  commands: string[]; // Slash commands provided
  contentHash: string; // Empty = no version check
}

// Search prompt with live filtering
await search({
  message: "Browse skills (type to filter):",
  source: (term) =>
    REGISTRY.filter(
      (s) => s.name.includes(term) || s.description.includes(term),
    ).map((s) => ({ name: formatChoice(s, installed), value: s.name })),
});
```

## Commits

| Hash    | Type | Description                            |
| ------- | ---- | -------------------------------------- |
| f75aebb | feat | Add skill registry and browse function |
| 14ecb53 | feat | Wire browse subcommand in CLI          |

## Verification Results

- [x] TypeScript compiles without errors
- [x] `klausbot skills browse` launches search prompt
- [x] Help text shows `skills [browse]`
- [x] formatChoice() shows install status badges
- [x] checkForUpdate() detects hash differences

## Deviations from Plan

None - plan executed exactly as written.

## Next Phase Readiness

Ready for 04.1-03 (system prompt skill reminder).

---

_Plan completed: 2026-01-30_
