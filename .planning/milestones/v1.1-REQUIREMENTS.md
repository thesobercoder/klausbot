# Requirements Archive: v1.1 Production Ready

**Archived:** 2026-02-09
**Status:** SHIPPED

This is the archived requirements specification for v1.1.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

## v1.1 Requirements

Requirements for v1.1 Production Ready release.

### Setup — DESCOPED

- [~] **SETUP-01**: `onboard` command launches interactive wizard for first-time setup
- [~] **SETUP-02**: Wizard creates JSON config file with model and preferences
- [~] **SETUP-03**: Pairing code stored encrypted in SQLite (not plaintext)
- [~] **SETUP-04**: Gateway refuses to start if setup not complete (clear error message)
- [~] **SETUP-05**: Config follows 12-factor (reads from env vars, never prompts for secrets)

> Descoped: Not needed for fork-and-run deployment model.

### Service — DESCOPED

- [~] **SERV-01**: `service install` command registers daemon with system service manager
- [~] **SERV-02**: `service uninstall` command removes daemon from service manager
- [~] **SERV-03**: `service status` command shows daemon state
- [~] **SERV-04**: launchd support on macOS (plist in ~/Library/LaunchAgents)
- [~] **SERV-05**: systemd support on Linux/WSL2 (user unit file)

> Descoped: Not needed for fork-and-run deployment model.

### Streaming — COMPLETE

- [x] **STRM-01**: Telegram draft streaming via `sendMessageDraft` API
- [x] **STRM-02**: Streaming updates throttled to avoid API rate limits
- [x] **STRM-03**: Final message sent as normal message after streaming completes
- [x] **STRM-04**: Streaming configurable (can be disabled)

### Telegram — COMPLETE

- [x] **TELE-01**: Thread support for single conversation (message_thread_id)
- [x] **TELE-02**: Replies properly threaded to maintain conversation context

### Security — DESCOPED

- [~] **SECU-01**: User prompts sanitized before passing to Claude
- [~] **SECU-02**: Input validation prevents injection attacks
- [~] **SECU-03**: Sensitive data (pairing codes, tokens) never logged in plaintext

> Descoped: Claude Code handles prompt injection natively. XML escaping added for user message wrapping.

### Platform — COMPLETE (1 DEFERRED)

- [x] **PLAT-01**: Works on macOS (Intel and Apple Silicon)
- [x] **PLAT-02**: Works on Linux (Ubuntu/Debian, Fedora/RHEL)
- [x] **PLAT-03**: Works on Windows via WSL2
- [~] **PLAT-04**: Docker support — DEFERRED to v2
- [x] **PLAT-05**: execPath detection for self-executable identification
- [x] **PLAT-06**: Identical behavior across all supported platforms

### Detection — COMPLETE

- [x] **DTCT-01**: Detect Claude Code login status at startup
- [x] **DTCT-02**: Detect `OPENAI_API_KEY` availability for embeddings
- [x] **DTCT-03**: Graceful degradation (disable `search_memory` if no embeddings API)
- [x] **DTCT-04**: Clear messaging when features disabled due to missing env vars
- [x] **DTCT-05**: 12-factor compliance (all config from env vars)

### Doctor — DESCOPED

- [~] **DOCT-01**: `doctor` command performs full prerequisite check
- [~] **DOCT-02**: Check required env vars present
- [~] **DOCT-03**: Check Node.js version meets requirements
- [~] **DOCT-04**: Check disk space sufficient
- [~] **DOCT-05**: Check network connectivity
- [~] **DOCT-06**: Check Telegram bot token valid
- [~] **DOCT-07**: Check Claude Code accessible
- [~] **DOCT-08**: Clear pass/fail output with remediation hints

> Descoped: Not needed for fork-and-run deployment model.

### Heartbeat — COMPLETE

- [x] **HRTB-01**: HEARTBEAT.md file support in workspace
- [x] **HRTB-02**: Periodic heartbeat check (30m default, configurable)
- [x] **HRTB-03**: `HEARTBEAT_OK` response contract (suppresses if nothing to report)
- [x] **HRTB-04**: User can save notes to HEARTBEAT.md via conversation ("remember to check X")
- [x] **HRTB-05**: Heartbeat distinct from cron (awareness vs scheduled tasks)
- [x] **HRTB-06**: Heartbeat configurable (interval, enabled/disabled)

### Testing — COMPLETE (1 DESCOPED)

- [x] **TEST-01**: Unit tests for core modules (gateway, spawner, memory, cron)
- [x] **TEST-02**: E2E tests for critical flows (onboard, message handling, cron execution)
- [x] **TEST-03**: Test coverage ensures "tests pass = app works" confidence
- [~] **TEST-04**: CI/CD pipeline runs tests on push — DESCOPED

> TEST-04 descoped: CI/CD not implemented for fork-and-run model.

### Release — COMPLETE

- [x] **RLSE-01**: README with step-by-step installation guide
- [x] **RLSE-02**: README includes "Why I built it" section
- [x] **RLSE-03**: Complete documentation for all commands
- [x] **RLSE-04**: Configuration reference documentation
- [x] **RLSE-05**: Troubleshooting guide

## Traceability

| Requirement | Phase    | Status   |
| ----------- | -------- | -------- |
| PLAT-01     | Phase 9  | Complete |
| PLAT-02     | Phase 9  | Complete |
| PLAT-03     | Phase 9  | Complete |
| PLAT-05     | Phase 9  | Complete |
| PLAT-06     | Phase 9  | Complete |
| DTCT-01     | Phase 9  | Complete |
| DTCT-02     | Phase 9  | Complete |
| DTCT-03     | Phase 9  | Complete |
| DTCT-04     | Phase 9  | Complete |
| DTCT-05     | Phase 9  | Complete |
| STRM-01     | Phase 10 | Complete |
| STRM-02     | Phase 10 | Complete |
| STRM-03     | Phase 10 | Complete |
| STRM-04     | Phase 10 | Complete |
| TELE-01     | Phase 11 | Complete |
| TELE-02     | Phase 11 | Complete |
| HRTB-01     | Phase 12 | Complete |
| HRTB-02     | Phase 12 | Complete |
| HRTB-03     | Phase 12 | Complete |
| HRTB-04     | Phase 12 | Complete |
| HRTB-05     | Phase 12 | Complete |
| HRTB-06     | Phase 12 | Complete |
| RLSE-01     | Phase 13 | Complete |
| RLSE-02     | Phase 13 | Complete |
| RLSE-03     | Phase 13 | Complete |
| RLSE-04     | Phase 13 | Complete |
| RLSE-05     | Phase 13 | Complete |
| TEST-01     | Phase 14 | Complete |
| TEST-02     | Phase 14 | Complete |
| TEST-03     | Phase 14 | Complete |
| PLAT-04     | -        | DEFERRED |
| TEST-04     | -        | DESCOPED |
| SETUP-*     | -        | DESCOPED |
| SERV-*      | -        | DESCOPED |
| SECU-*      | -        | DESCOPED |
| DOCT-*      | -        | DESCOPED |

## Milestone Summary

**Shipped:** 28 of 49 v1.1 requirements
**Deferred:** 1 (PLAT-04 Docker)
**Descoped:** 20 (SETUP-5, SERV-5, SECU-3, DOCT-8, TEST-04 — not needed for fork-and-run model)

---

_Archived: 2026-02-09 as part of v1.1 milestone completion_
